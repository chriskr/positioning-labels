{"version":3,"sources":["testLabels.js","util.js","Input.js","TestBubbleChart.jsx","App.js","index.js"],"names":["names","moveRect","_ref","deltaLeft","deltaTop","left","right","top","bottom","addMargin","_ref2","_ref3","leftMargin","rightMargin","getDistance","_ref4","_ref5","left1","top1","left2","top2","Math","pow","getCenter","_ref6","isOverlapping","_ref7","_ref8","right1","bottom1","right2","bottom2","_isOverlapping","_getCandidate","rect","layedOutRects","center","strategy","count","candRect","Object","objectSpread","rectWithMargin","some","layedOutRect","_layoutBox","_getBestCandidate","startPoint","candidates","withDistance","map","candidate","pysicalDistance","getPysicalDistance","distance","sort","a","b","slicedToArray","centerLeft","centerTop","rectLeft","rectTop","rectRight","rectBottom","horizontalDistance","verticalDistance","_ref16","_ref16$center","_ref16$strategy","forEach","centerRect","moveRight","moveDown","nop","Input","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onInput","value","target","setState","state","submit","onChange","onKeyDown","event","key","ref","React","createRef","_this$props","placeholder","react_default","createElement","type","Component","DEFAULT_BUBBLE_COUNT","getFontSize","radius","Circle","styled","circle","_templateObject","View","div","_templateObject2","Container","_templateObject3","console","log","isHover","css","_templateObject4","Label","_templateObject5","Svg","svg","_templateObject6","Controls","_templateObject7","InputLabel","label","_templateObject8","buildExampleData","n","arguments","length","undefined","range","random","color","concat","labels","join","TestBubbleChart","setExampleData","data","bubbleCount","mode","hoverIndex","svgRef","containerRef","hoverCircle","_event","onMouseOver","nativeEvent","hanleMouseOver","throttle","closest","Array","from","parentElement","children","indexOf","_this2","style","width","height","viewBox","index","r","cx","cy","opacity","fill","_ref2$label","fontSize","className","onClick","src_Input","current","currentData","containerRect","getBoundingClientRect","offsetLeft","offsetTop","layedOutLabels","rects","bubbles","constraints","minMargin","sum","_ref11","_ref12","centerDistance","bubble","toConsumableArray","candRects","_ref13","_ref14","bestCandidate","push","slice","minusMargin","_ref15","layoutRects","querySelectorAll","ele","_currentData$index","HEIGHT","WIDTH","rest","objectWithoutProperties","positionLabels","App","src_TestBubbleChart","ReactDOM","render","src_App","document","getElementById"],"mappings":"6QAAaA,EAAQ,CACnB,OACA,OACA,UACA,QACA,QACA,WACA,QACA,SACA,SACA,QACA,QACA,UACA,YACA,QACA,SACA,UACA,QACA,QACA,SACA,UACA,SACA,YACA,QACA,SACA,QACA,SACA,OACA,OACA,QACA,OACA,UACA,UACA,QACA,UACA,OACA,SACA,OACA,cACA,SACA,SACA,UACA,QACA,OACA,QACA,SACA,QACA,SACA,SACA,UACA,QACA,SACA,YACA,SACA,MACA,WACA,SACA,SACA,SACA,QACA,UACA,MACA,WACA,WACA,SACA,SACA,SACA,QACA,WACA,OACA,SACA,QACA,UACA,SACA,UACA,SACA,MACA,OACA,QACA,SACA,UACA,OACA,UACA,SACA,OACA,WACA,SACA,OACA,SACA,SACA,SACA,QACA,QACA,WACA,QACA,SACA,QACA,WACA,SACA,QACA,UACA,QACA,UACA,UACA,UACA,OACA,QACA,QACA,UACA,SACA,QACA,SACA,YACA,WACA,UACA,OACA,SACA,OACA,UACA,SACA,QACA,UACA,QACA,UACA,SACA,SACA,SACA,MACA,MACA,QACA,OACA,QACA,SACA,UACA,WACA,OACA,SACA,OACA,SACA,QACA,QACA,SACA,WACA,OACA,QACA,SACA,OACA,OACA,SACA,OACA,QACA,OACA,QACA,UACA,WACA,QACA,OACA,OACA,UACA,OACA,UACA,SACA,SACA,SACA,UACA,SACA,QACA,OACA,WACA,SACA,UACA,UACA,QACA,SACA,SACA,UACA,SACA,OACA,OACA,SACA,QACA,QACA,SACA,SACA,QACA,SACA,QACA,SACA,OACA,SACA,UACA,SACA,QACA,SACA,YACA,SACA,SACA,UACA,UACA,OACA,2BCvLWC,EAAW,SAAAC,EAEtBC,EACAC,GAHsB,MAIlB,CACJC,KALsBH,EACpBG,KAIWF,EACbG,MANsBJ,EACdI,MAKOH,EACfI,IAPsBL,EACPK,IAMJH,EACXI,OARsBN,EACFM,OAOHJ,IAGNK,EAAY,SAAAC,EAAAC,GAAA,IACrBN,EADqBK,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","file":"static/js/main.ed577e2a.chunk.js","sourcesContent":["export const names = [\n  'Liam',\n  'Noah',\n  'William',\n  'James',\n  'Logan',\n  'Benjamin',\n  'Mason',\n  'Elijah',\n  'Oliver',\n  'Jacob',\n  'Lucas',\n  'Michael',\n  'Alexander',\n  'Ethan',\n  'Daniel',\n  'Matthew',\n  'Aiden',\n  'Henry',\n  'Joseph',\n  'Jackson',\n  'Samuel',\n  'Sebastian',\n  'David',\n  'Carter',\n  'Wyatt',\n  'Jayden',\n  'John',\n  'Owen',\n  'Dylan',\n  'Luke',\n  'Gabriel',\n  'Anthony',\n  'Isaac',\n  'Grayson',\n  'Jack',\n  'Julian',\n  'Levi',\n  'Christopher',\n  'Joshua',\n  'Andrew',\n  'Lincoln',\n  'Mateo',\n  'Ryan',\n  'Jaxon',\n  'Nathan',\n  'Aaron',\n  'Isaiah',\n  'Thomas',\n  'Charles',\n  'Caleb',\n  'Josiah',\n  'Christian',\n  'Hunter',\n  'Eli',\n  'Jonathan',\n  'Connor',\n  'Landon',\n  'Adrian',\n  'Asher',\n  'Cameron',\n  'Leo',\n  'Theodore',\n  'Jeremiah',\n  'Hudson',\n  'Robert',\n  'Easton',\n  'Nolan',\n  'Nicholas',\n  'Ezra',\n  'Colton',\n  'Angel',\n  'Brayden',\n  'Jordan',\n  'Dominic',\n  'Austin',\n  'Ian',\n  'Adam',\n  'Elias',\n  'Jaxson',\n  'Greyson',\n  'Jose',\n  'Ezekiel',\n  'Carson',\n  'Evan',\n  'Maverick',\n  'Bryson',\n  'Jace',\n  'Cooper',\n  'Xavier',\n  'Parker',\n  'Roman',\n  'Jason',\n  'Santiago',\n  'Chase',\n  'Sawyer',\n  'Gavin',\n  'Leonardo',\n  'Kayden',\n  'Ayden',\n  'Jameson',\n  'Kevin',\n  'Bentley',\n  'Zachary',\n  'Everett',\n  'Axel',\n  'Tyler',\n  'Micah',\n  'Vincent',\n  'Weston',\n  'Miles',\n  'Wesley',\n  'Nathaniel',\n  'Harrison',\n  'Brandon',\n  'Cole',\n  'Declan',\n  'Luis',\n  'Braxton',\n  'Damian',\n  'Silas',\n  'Tristan',\n  'Ryder',\n  'Bennett',\n  'George',\n  'Emmett',\n  'Justin',\n  'Kai',\n  'Max',\n  'Diego',\n  'Luca',\n  'Ryker',\n  'Carlos',\n  'Maxwell',\n  'Kingston',\n  'Ivan',\n  'Maddox',\n  'Juan',\n  'Ashton',\n  'Jayce',\n  'Rowan',\n  'Kaiden',\n  'Giovanni',\n  'Eric',\n  'Jesus',\n  'Calvin',\n  'Abel',\n  'King',\n  'Camden',\n  'Amir',\n  'Blake',\n  'Alex',\n  'Brody',\n  'Malachi',\n  'Emmanuel',\n  'Jonah',\n  'Beau',\n  'Jude',\n  'Antonio',\n  'Alan',\n  'Elliott',\n  'Elliot',\n  'Waylon',\n  'Xander',\n  'Timothy',\n  'Victor',\n  'Bryce',\n  'Finn',\n  'Brantley',\n  'Edward',\n  'Abraham',\n  'Patrick',\n  'Grant',\n  'Karter',\n  'Hayden',\n  'Richard',\n  'Miguel',\n  'Joel',\n  'Gael',\n  'Tucker',\n  'Rhett',\n  'Avery',\n  'Steven',\n  'Graham',\n  'Kaleb',\n  'Jasper',\n  'Jesse',\n  'Matteo',\n  'Dean',\n  'Zayden',\n  'Preston',\n  'August',\n  'Oscar',\n  'Jeremy',\n  'Alejandro',\n  'Marcus',\n  'Dawson',\n  'Lorenzo',\n  'Messiah',\n  'Zion',\n  'Maximus'\n];\n","import { sum } from 'lodash';\n\nconst NO_OVERLAP = {\n  get left() {\n    return 0;\n  },\n  get right() {\n    return 0;\n  },\n  get top() {\n    return 0;\n  },\n  get bottom() {\n    return 0;\n  },\n};\n\nexport const moveRect = (\n  { left, right, top, bottom },\n  deltaLeft,\n  deltaTop\n) => ({\n  left: left + deltaLeft,\n  right: right + deltaLeft,\n  top: top + deltaTop,\n  bottom: bottom + deltaTop,\n});\n\nexport const addMargin = (\n  { left, right, top, bottom },\n  { left: leftMargin, right: rightMargin, top: topMargin, bottom: bottomMargin }\n) => ({\n  left: left - leftMargin,\n  top: top - topMargin,\n  right: right + rightMargin,\n  bottom: bottom + bottomMargin,\n});\n\nexport const getDistance = (\n  { left: left1, top: top1 },\n  { left: left2, top: top2 }\n) => ((left1 - left2) ** 2 + (top1 - top2) ** 2) ** 0.5;\n\nexport const getCenter = ({ left, right, top, bottom }) => {\n  left += (right - left) / 2;\n  top += (bottom - top) / 2;\n  return {\n    left,\n    top,\n    right: left,\n    bottom: top,\n  };\n};\n\nexport const isOverlapping = (\n  { left: left1, right: right1, top: top1, bottom: bottom1 },\n  { left: left2, right: right2, top: top2, bottom: bottom2 }\n) => _isOverlapping(left1, left2, right1, right2, top1, top2, bottom1, bottom2);\n\nconst getOverlap = (\n  { left: left1, right: right1, top: top1, bottom: bottom1 },\n  { left: left2, right: right2, top: top2, bottom: bottom2 }\n) =>\n  _isOverlapping(left1, left2, right1, right2, top1, top2, bottom1, bottom2)\n    ? {\n        left: Math.max(left1, left2),\n        right: Math.min(right1, right2),\n        top: Math.max(top1, top2),\n        bottom: Math.min(bottom1, bottom2),\n      }\n    : NO_OVERLAP;\n\nexport const layoutRects = (\n  rects,\n  bubbles,\n  constraints,\n  minMargin = { left: 2, top: 1, right: 2, bottom: 1 }\n) => {\n  const centerLeft =\n    sum(rects.map(({ left, right }) => left + (right - left) / 2)) /\n    rects.length;\n\n  const centerTop =\n    sum(rects.map(({ top, bottom }) => top + (bottom - top) / 2)) /\n    rects.length;\n\n  const center = {\n    left: centerLeft,\n    right: centerLeft,\n    top: centerTop,\n    bottom: centerTop,\n  };\n\n  const withDistance = rects\n    .map((rect, index) => ({\n      centerDistance: getDistance(getCenter(rect), center),\n      rect,\n      rectWithMargin: addMargin(rect, minMargin),\n      index,\n      bubble: bubbles[index],\n    }))\n    .sort((a, b) => b.bubble.radius - a.bubble.radius);\n\n  let layedOutRects = [...constraints.map(rect => ({ rectWithMargin: rect }))];\n\n  withDistance.forEach(rect => {\n    const candRects = [\n      [center, {}],\n      [null, { moveRight: false, moveDown: false }],\n      [null, { moveRight: true, moveDown: false }],\n      [null, { moveRight: false, moveDown: true }],\n      [null, { moveRight: true, moveDown: true }],\n    ].map(([center, strategy]) =>\n      _getCandidate(rect, layedOutRects, center, strategy)\n    );\n    const startPoint = {\n      left: rect.bubble.left,\n      right: rect.bubble.left,\n      top: rect.bubble.top,\n      bottom: rect.bubble.top,\n    };\n    const bestCandidate = _getBestCandidate(startPoint, candRects);\n    rect.rectWithMargin = bestCandidate;\n    layedOutRects.push(rect);\n  });\n\n  layedOutRects = layedOutRects.slice(constraints.length);\n\n  const minusMargin = {\n    left: -minMargin.left,\n    right: -minMargin.right,\n    top: -minMargin.top,\n    bottom: -minMargin.bottom,\n  };\n\n  return layedOutRects\n    .sort((a, b) => a.index - b.index)\n    .map(({ rectWithMargin, label }) => addMargin(rectWithMargin, minusMargin));\n};\n\nconst _getCandidate = (rect, layedOutRects, center, strategy) => {\n  let count = 16;\n  let candRect = { ...rect.rectWithMargin };\n  while (\n    layedOutRects.some(layedOutRect =>\n      isOverlapping(candRect, layedOutRect.rectWithMargin)\n    ) &&\n    count-- > 0\n  ) {\n    candRect = _layoutBox({ rect: candRect, layedOutRects, center, strategy });\n  }\n  return candRect;\n};\n\nconst _getBestCandidate = (startPoint, candidates) => {\n  const withDistance = candidates\n    .map(candidate => ({\n      candidate,\n      pysicalDistance: getPysicalDistance(startPoint, candidate),\n      distance: getDistance(startPoint, getCenter(candidate)),\n    }))\n    .sort((a, b) =>\n      a.pysicalDistance === 0 && b.pysicalDistance === 0\n        ? a.distance - b.distance\n        : a.pysicalDistance - b.pysicalDistance\n    );\n  const [{ candidate }] = withDistance;\n  return candidate;\n};\n\nconst getPysicalDistance = (center, rect) => {\n  const { left: centerLeft, top: centerTop } = center;\n  const {\n    left: rectLeft,\n    top: rectTop,\n    right: rectRight,\n    bottom: rectBottom,\n  } = rect;\n\n  const horizontalDistance =\n    rectLeft <= centerLeft && rectRight >= centerLeft\n      ? 0\n      : rectLeft > centerLeft\n      ? rectLeft - centerLeft\n      : centerLeft - rectRight;\n  const verticalDistance =\n    rectTop <= centerTop && rectBottom >= centerTop\n      ? 0\n      : rectTop > centerTop\n      ? rectTop - centerTop\n      : centerTop - rectBottom;\n\n  return (horizontalDistance ** 2 + verticalDistance ** 2) ** 0.5;\n};\n\nconst _layoutBox = ({ rect, layedOutRects, center = null, strategy = {} }) => {\n  layedOutRects.forEach(layedOutRect => {\n    if (isOverlapping(rect, layedOutRect.rectWithMargin)) {\n      const centerRect = getCenter(rect);\n      const moveRight = center\n        ? centerRect.left > center.left\n        : strategy.moveRight;\n      const deltaLeft = moveRight\n        ? // move right\n          layedOutRect.rectWithMargin.right - rect.left\n        : // move left\n          layedOutRect.rectWithMargin.left - rect.right;\n      const moveDown = center ? centerRect.top > center.top : strategy.moveDown;\n      const deltaTop = moveDown\n        ? // move down\n          layedOutRect.rectWithMargin.bottom - rect.top\n        : // move up\n          layedOutRect.rectWithMargin.top - rect.bottom;\n\n      rect = _getBestCandidate(centerRect, [\n        moveRect(rect, deltaLeft, 0),\n        moveRect(rect, 0, deltaTop),\n      ]);\n    }\n  });\n  return rect;\n};\n\nconst _isOverlapping = (\n  left1,\n  left2,\n  right1,\n  right2,\n  top1,\n  top2,\n  bottom1,\n  bottom2\n) => left1 < right2 && left2 < right1 && top1 < bottom2 && top2 < bottom1;\n","import React, { Component } from 'react';\n\nconst nop = () => null;\n\nclass Input extends React.Component {\n  onInput = ({ target: { value } }) => this.setState({ value });\n  state = {\n    value: '',\n  };\n\n  submit = () => this.props.onChange && this.props.onChange(this.state.value);\n\n  onKeyDown = event => {\n    switch (event.key) {\n      case 'Enter':\n        this.submit();\n        break;\n    }\n  };\n\n  ref = React.createRef();\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: props.value,\n    };\n  }\n\n  render() {\n    const { onChange, placeholder } = this.props;\n\n    return (\n      <input\n        type=\"text\"\n        value={this.state.value}\n        placeholder={placeholder}\n        onInput={this.onInput}\n        onChange={nop}\n        onKeyDown={this.onKeyDown}\n      />\n    );\n  }\n}\n\nexport default Input;\n","import React from 'react';\nimport { range, throttle } from 'lodash';\nimport styled, { css } from 'styled-components';\nimport { names as labels } from './testLabels';\nimport { layoutRects, moveRect } from './util';\nimport Input from './Input';\n\nconst WIDTH = 800;\nconst HEIGHT = 500;\nconst MAX_RADIUS = 50;\nconst MIN_RADIUS = 10;\nconst MIN_FONT_SIZE = 10;\nconst MAX_FONT_SIZE = 24;\n\nconst DEFAULT_BUBBLE_COUNT = 50;\n\nconst getFontSize = radius => {\n  return (\n    MIN_FONT_SIZE +\n    ((radius - MIN_RADIUS) / (MAX_RADIUS - MIN_RADIUS)) *\n      (MAX_FONT_SIZE - MIN_FONT_SIZE)\n  );\n};\n\nconst Circle = styled.circle`\n  stroke-width: 1;\n  stroke: hsla(0, 0%, 0%, 0.15);\n  cursor: pointer;\n`;\n\nconst View = styled.div`\n  padding: 100px;\n`;\n\nconst Container = styled.div`\n  position: relative;\n  & circle,\n  & .label {\n    transition: opacity 0.25s;\n  }\n  ${props => (\n    console.log(props.isHover),\n    props.isHover &&\n      css`\n        & circle {\n          opacity: 0.1;\n        }\n        & .label {\n          opacity: 0;\n        }\n      `\n  )}\n`;\n\nconst Label = styled.div`\n  white-space: nowrap;\n  position: absolute;\n  top: 0;\n  left: 0;\n  line-height: 1;\n  font-size: 10px;\n  font-weight: 300;\n  pointer-events: none;\n  text-align: center;\n`;\n\nconst Svg = styled.svg`\n  border: 1px solid hsla(0, 0%, 0%, 0.1);\n`;\n\nconst Controls = styled.div`\n  margin-top: 100px;\n`;\n\nconst InputLabel = styled.label`\n  margin: 0 20px;\n`;\n\nconst getRandomLabel = () =>\n  range((1 + Math.random() * 3) | 0)\n    .map(() => labels[(Math.random() * labels.length) | 0])\n    .join(' ');\n\nconst buildExampleData = (n = 50) => {\n  return range(n).map(() => {\n    const radius = (MIN_RADIUS + Math.random() * (MAX_RADIUS - MIN_RADIUS)) | 0;\n    const left = (MAX_RADIUS + Math.random() * (WIDTH - 2 * MAX_RADIUS)) | 0;\n    const top = (MAX_RADIUS + Math.random() * (HEIGHT - 2 * MAX_RADIUS)) | 0;\n    const color = `hsla(${(Math.random() * 360) | 0}, 100%, 50%, .3)`;\n    const label = {\n      label: getRandomLabel(),\n      left: 0,\n      top: 0,\n    };\n    return { radius, left, top, color, label };\n  });\n};\n\nclass TestBubbleChart extends React.Component {\n  setExampleData = () => {\n    const data = buildExampleData(this.state.bubbleCount).sort(\n      (a, b) => b.radius - a.radius\n    );\n    this.setState({ data, mode: 0, hoverIndex: -1 });\n  };\n  state = {\n    data: buildExampleData(DEFAULT_BUBBLE_COUNT).sort(\n      (a, b) => b.radius - a.radius\n    ),\n    mode: 0,\n    bubbleCount: DEFAULT_BUBBLE_COUNT,\n    hoverIndex: -1,\n  };\n  svgRef = React.createRef();\n  containerRef = React.createRef();\n  hoverCircle = null;\n  _event = null;\n  onMouseOver = event => {\n    this._event = event.nativeEvent;\n    this.hanleMouseOver();\n  };\n  hanleMouseOver = throttle(() => {\n    if (!this._event) return;\n    const circle = this._event.target.closest('circle');\n    if (circle !== this.hoverCircle) {\n      this.hoverCircle = circle;\n      const hoverIndex = circle\n        ? Array.from(circle.parentElement.children).indexOf(circle)\n        : -1;\n      this.setState({ hoverIndex });\n    }\n    this._event = null;\n  }, 64);\n  render() {\n    const style = {\n      width: `$WIDTH}px`,\n      height: `${HEIGHT}px`,\n    };\n    return (\n      <View>\n        <Container\n          ref={this.containerRef}\n          isHover={this.state.hoverIndex > -1}\n          onMouseOver={this.onMouseOver}\n        >\n          <Svg\n            viewBox={`0 0 ${WIDTH} ${HEIGHT}`}\n            style={style}\n            ref={this.svgRef}\n          >\n            {this.state.data.map(\n              ({ radius: r, left: cx, top: cy, color }, index) => {\n                const style =\n                  index === this.state.hoverIndex ? { opacity: 1 } : {};\n                return (\n                  <Circle r={r} cx={cx} cy={cy} fill={color} style={style} />\n                );\n              }\n            )}\n          </Svg>\n          {this.state.data.map(\n            ({ label: { label, top, left }, radius }, index) => {\n              const style = {\n                left: `${left}px`,\n                top: `${top}px`,\n                fontSize: `${getFontSize(radius)}px`,\n              };\n              if (index === this.state.hoverIndex) {\n                style.opacity = 1;\n              }\n              return (\n                <Label style={style} className=\"label\">\n                  {label}\n                </Label>\n              );\n            }\n          )}\n        </Container>\n        <Controls>\n          <button onClick={this.setExampleData}>Set example data</button>\n          <InputLabel>bubble count</InputLabel>\n          <Input\n            value={this.state.bubbleCount}\n            onChange={bubbleCount =>\n              this.setState({\n                bubbleCount,\n                data: buildExampleData(bubbleCount).sort(\n                  (a, b) => b.radius - a.radius\n                ),\n                mode: 0,\n                hoverIndex: -1,\n              })\n            }\n          />\n        </Controls>\n      </View>\n    );\n  }\n\n  positionLabels() {\n    if (!this.containerRef.current) {\n      return;\n    }\n    if (this.state.mode === 0) {\n      const currentData = this.state.data;\n      const containerRect = this.containerRef.current.getBoundingClientRect();\n      const { left: offsetLeft, top: offsetTop } = containerRect;\n      const labelRects = Array.from(\n        this.containerRef.current.querySelectorAll('.label')\n      ).map((ele, index) => {\n        const rect = ele.getBoundingClientRect();\n        const { left, top } = currentData[index];\n        const deltaLeft = left - offsetLeft - (rect.right - rect.left) / 2;\n        const deltaTop = top - offsetTop - (rect.bottom - rect.top) / 2;\n        return moveRect(rect, deltaLeft, deltaTop);\n      });\n      const bubbles = this.state.data.map(({ radius, left, top }) => ({\n        radius,\n        left,\n        top,\n      }));\n      const borderWidth = 20;\n      const constraints = [\n        {\n          left: -borderWidth,\n          right: 0,\n          top: -borderWidth,\n          bottom: HEIGHT + 2 * borderWidth,\n        },\n        {\n          left: WIDTH,\n          right: WIDTH + borderWidth,\n          top: -borderWidth,\n          bottom: HEIGHT + 2 * borderWidth,\n        },\n        { left: 0, right: WIDTH, top: -borderWidth, bottom: 0 },\n        { left: 0, right: WIDTH, top: HEIGHT, bottom: HEIGHT + borderWidth },\n      ];\n      const layedOutLabels = layoutRects(labelRects, bubbles, constraints);\n      const data = this.state.data.map(\n        ({ label: { label }, ...rest }, index) => {\n          const rect = layedOutLabels[index];\n          return {\n            ...rest,\n            label: {\n              label,\n              ...rect,\n            },\n          };\n        }\n      );\n      this.setState({ data, mode: 1, hoverIndex: -1 });\n    }\n  }\n\n  componentDidMount() {\n    this.positionLabels();\n  }\n\n  componentDidUpdate() {\n    this.positionLabels();\n  }\n}\n\nexport default TestBubbleChart;\n","import React from 'react';\n\nimport TestBubbleChart from './TestBubbleChart';\nfunction App() {\n  return (\n    <div className=\"App\">\n      <TestBubbleChart />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}